webpackJsonp([1],{"1uer":function(t,e){},"56tD":function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("7+uW"),s=n("8f98"),r=n.n(s),o=n("FfS/"),a=n.n(o),d=n("DtRx"),l=n.n(d),h=n("bxQx"),u={props:{url:{required:!0,type:String},alt:{required:!0,type:String},size:{default:24,type:Number},round:{default:!1,type:Boolean}},computed:{avatarStyle(){return`width: ${this.size}px; height: ${this.size}px;`}}},c={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{directives:[{name:"tooltip",rawName:"v-tooltip",value:this.alt,expression:"alt"}],staticClass:"Avatar",class:{"Avatar--isRound":this.round},style:this.avatarStyle},[e("img",{staticClass:"Avatar__Image",attrs:{src:this.url,alt:this.alt}})])},staticRenderFns:[]};var f=n("VU/8")(u,c,!1,function(t){n("V0Dg")},"data-v-616f5bd0",null).exports,m={props:{state:{type:String,required:!0}},computed:{statusClass(){switch(this.state){case"SEND":return"Status--isSent";case"READ":return"Status--isRead";default:return""}}}},p={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{directives:[{name:"tooltip",rawName:"v-tooltip",value:this.state,expression:"state"}],staticClass:"Status",class:this.statusClass})},staticRenderFns:[]};var g={components:{Avatar:f,Status:n("VU/8")(m,p,!1,function(t){n("1uer")},"data-v-1b09361e",null).exports},props:{data:{type:Object,required:!0}},data:()=>({status:"SENDING",statusTimer:!1}),mounted(){this.simulateStatus()},beforeDestroy(){window.clearTimeout(this.statusTimer),this.statusTimer=!1},methods:{simulateStatus(){this.setStatus("SEND",1500).then(()=>{this.setStatus("READ",3e3)})},setStatus(t,e){return new Promise((n,i)=>{this.statusTimer=window.setTimeout(()=>{this.status=t,n(!0)},e)})}}},v={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.data.index+" - "+t.data.id,expression:"data.index + ' - ' + data.id"}],staticClass:"Message"},[n("div",{staticClass:"Message__Wrapper",class:{"Message__Wrapper--isAuthor":t.data.isRight}},[n("div",{staticClass:"Message__Bubble",class:{"Message__Bubble--isAuthor":t.data.isRight}},[t.data.isRight?t._e():n("div",{staticClass:"Author"},[n("Avatar",{attrs:{url:t.data.avatar,alt:t.data.author,round:""}}),t._v(" "),n("span",{staticClass:"Author__Name"},[t._v(t._s(t.data.author))])],1),t._v(" "),n("div",{staticClass:"Text"},[t._v("\n        "+t._s(t.data.message)+"\n      ")]),t._v(" "),n("Status",{attrs:{state:t.status}})],1),t._v(" "),t.data.attachment?n("div",{staticClass:"Attachment",class:{"Attachment--isAuthor":t.data.isRight}},[n("div",{staticClass:"Attachment__Overlay"},[n("div",{staticClass:"Attachment__Author"},[t._v(t._s(t.data.author))])]),t._v(" "),n("img",{staticClass:"Attachment__Preview",attrs:{src:t.data.attachment}})]):t._e()])])},staticRenderFns:[]};var w=n("VU/8")(g,v,!1,function(t){n("S0FB")},"data-v-d42c4180",null).exports,b={name:"App",components:{VirtualStream:h.a,Message:w},data(){return{items:this.generateMessages(300)}},methods:{generateMessages(t){const e=[];for(let n=0;n<t;n++)e.unshift(this.generateMessage(n));return e},generateMessage(t){const e=Math.floor(10*Math.random())>7,n=Math.floor(20*Math.random())>16;return{id:l()(),index:t,author:a.a.name.findName(),avatar:a.a.fake("{{image.avatar}}"),message:r()({sentenceLowerBound:5,sentenceUpperBound:30}),attachment:n?a.a.fake("{{image.imageUrl}}"):null,isRight:e}},addMessage(){const t=[...this.items];t.push(this.generateMessage(this.items.length)),this.items=t},updateMessage(t){const e=[...this.items],n=Math.floor(20*Math.random())>16;e[t.index]=Object.assign({},e[t.index],{message:r()({sentenceLowerBound:5,sentenceUpperBound:200}),attachment:n?a.a.fake("{{image.imageUrl}}"):null}),this.items=e.concat([])}}},y={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app",attrs:{id:"app"}},[n("div",{staticClass:"container"},[n("div",{staticClass:"container-inner"},[n("virtual-stream",{ref:"stream",attrs:{items:t.items,count:120,offset:80,attachToStart:"",reverseItems:"",reversed:""},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.item;return[n("div",{on:{click:function(e){t.updateMessage(i)}}},[n("Message",{attrs:{data:i}})],1)]}}])})],1),t._v(" "),n("div",{staticClass:"toolbar"},[n("div",[n("input",{attrs:{type:"text"}}),t._v(" "),n("button",{on:{click:t.addMessage}},[t._v("Add message")]),n("br")])])])])},staticRenderFns:[]};var A=n("VU/8")(b,y,!1,function(t){n("56tD"),n("WoOl"),n("UdqR")},"data-v-2cf2b1d0",null).exports,_=n("VN6J"),x=n("od15"),I=n.n(x);function S(t){if(!t.children||0==t.children.length)return 0;var e=Array.from(t.children).map(S);return t.children.length+e.reduce(function(t,e){return t+e},0)}const T=new I.a,$=new I.a.Panel("DOM nodes","#0ff","#002");T.addPanel($),T.showPanel(3),document.body.appendChild(T.dom);const C=()=>{window.requestIdleCallback(()=>{$.update(S(document.body),1500)}),setTimeout(C,100)};window.setTimeout(C,100),i.a.use(_.a),i.a.config.productionTip=!1,new i.a({el:"#app",components:{App:A},template:"<App/>"})},S0FB:function(t,e){},UdqR:function(t,e){},V0Dg:function(t,e){},WoOl:function(t,e){},bxQx:function(t,e,n){"use strict";(function(t){var n=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},i="undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{};function s(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function r(t,e){return t(e={exports:{}},e.exports),e.exports}var o="object"==typeof i&&i&&i.Object===Object&&i,a="object"==typeof self&&self&&self.Object===Object&&self,d=o||a||Function("return this")(),l=function(){return d.Date.now()},h=d.Symbol,u=Object.prototype,c=u.hasOwnProperty,f=u.toString,m=h?h.toStringTag:void 0;var p=function(t){var e=c.call(t,m),n=t[m];try{t[m]=void 0}catch(t){}var i=f.call(t);return e?t[m]=n:delete t[m],i},g=Object.prototype.toString;var v=function(t){return g.call(t)},w="[object Null]",b="[object Undefined]",y=h?h.toStringTag:void 0;var A=function(t){return null==t?void 0===t?b:w:y&&y in Object(t)?p(t):v(t)};var _=function(t){return null!=t&&"object"==typeof t},x="[object Symbol]";var I=function(t){return"symbol"==typeof t||_(t)&&A(t)==x},S=NaN,T=/^\s+|\s+$/g,$=/^[-+]0x[0-9a-f]+$/i,C=/^0b[01]+$/i,O=/^0o[0-7]+$/i,E=parseInt;var V=function(t){if("number"==typeof t)return t;if(I(t))return S;if(n(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=n(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(T,"");var i=C.test(t);return i||O.test(t)?E(t.slice(2),i?2:8):$.test(t)?S:+t},k="Expected a function",D=Math.max,P=Math.min;var H=function(t,e,i){var s,r,o,a,d,h,u=0,c=!1,f=!1,m=!0;if("function"!=typeof t)throw new TypeError(k);function p(e){var n=s,i=r;return s=r=void 0,u=e,a=t.apply(i,n)}function g(t){var n=t-h;return void 0===h||n>=e||n<0||f&&t-u>=o}function v(){var t=l();if(g(t))return w(t);d=setTimeout(v,function(t){var n=e-(t-h);return f?P(n,o-(t-u)):n}(t))}function w(t){return d=void 0,m&&s?p(t):(s=r=void 0,a)}function b(){var t=l(),n=g(t);if(s=arguments,r=this,h=t,n){if(void 0===d)return function(t){return u=t,d=setTimeout(v,e),c?p(t):a}(h);if(f)return d=setTimeout(v,e),p(h)}return void 0===d&&(d=setTimeout(v,e)),a}return e=V(e)||0,n(i)&&(c=!!i.leading,o=(f="maxWait"in i)?D(V(i.maxWait)||0,e):o,m="trailing"in i?!!i.trailing:m),b.cancel=function(){void 0!==d&&clearTimeout(d),u=0,s=h=r=d=void 0},b.flush=function(){return void 0===d?a:w(l())},b},j="Expected a function";var M=function(t,e,i){var s=!0,r=!0;if("function"!=typeof t)throw new TypeError(j);return n(i)&&(s="leading"in i?!!i.leading:s,r="trailing"in i?!!i.trailing:r),H(t,e,{leading:s,maxWait:e,trailing:r})},R=r(function(t,e){!function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=Object.assign||function(t){for(var e=arguments,n=1;n<arguments.length;n++){var i=e[n];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=(t.isDate=function(t){return t instanceof Date},t.isEmpty=function(t){return 0===Object.keys(t).length},t.isObject=function(t){return null!=t&&"object"===(void 0===t?"undefined":n(t))});t.properObject=function(t){return i(t)&&!t.hasOwnProperty?e({},t):t}}(e)});s(R);var B=s(r(function(t,e){!function(t,e,n){function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Object.defineProperty(e,"__esModule",{value:!0});var s=Object.assign||function(t){for(var e=arguments,n=1;n<arguments.length;n++){var i=e[n];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t};e.default=function t(e,r){if(e===r)return{};if(!(0,n.isObject)(e)||!(0,n.isObject)(r))return r;var o=(0,n.properObject)(e),a=(0,n.properObject)(r),d=Object.keys(o).reduce(function(t,e){return a.hasOwnProperty(e)?t:s({},t,i({},e,void 0))},{});return(0,n.isDate)(o)||(0,n.isDate)(a)?o.valueOf()==a.valueOf()?{}:a:Object.keys(a).reduce(function(e,r){if(!o.hasOwnProperty(r))return s({},e,i({},r,a[r]));var d=t(o[r],a[r]);return(0,n.isObject)(d)&&(0,n.isEmpty)(d)&&!(0,n.isDate)(d)?e:s({},e,i({},r,d))},d)},t.exports=e.default}(t,e,R)})),z=function(){if("undefined"!=typeof Map)return Map;function t(t,e){var n=-1;return t.some(function(t,i){return t[0]===e&&(n=i,!0)}),n}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(e){var n=t(this.__entries__,e),i=this.__entries__[n];return i&&i[1]},e.prototype.set=function(e,n){var i=t(this.__entries__,e);~i?this.__entries__[i][1]=n:this.__entries__.push([e,n])},e.prototype.delete=function(e){var n=this.__entries__,i=t(n,e);~i&&n.splice(i,1)},e.prototype.has=function(e){return!!~t(this.__entries__,e)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(t,e){void 0===e&&(e=null);for(var n=0,i=this.__entries__;n<i.length;n++){var s=i[n];t.call(e,s[1],s[0])}},e}()}(),N="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,W=void 0!==t&&t.Math===Math?t:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),F="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(W):function(t){return setTimeout(function(){return t(Date.now())},1e3/60)},q=2;var U=20,L=["top","right","bottom","left","width","height","size","weight"],G="undefined"!=typeof MutationObserver,Q=function(){function t(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(t,e){var n=!1,i=!1,s=0;function r(){n&&(n=!1,t()),i&&a()}function o(){F(r)}function a(){var t=Date.now();if(n){if(t-s<q)return;i=!0}else n=!0,i=!1,setTimeout(o,e);s=t}return a}(this.refresh.bind(this),U)}return t.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},t.prototype.removeObserver=function(t){var e=this.observers_,n=e.indexOf(t);~n&&e.splice(n,1),!e.length&&this.connected_&&this.disconnect_()},t.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},t.prototype.updateObservers_=function(){var t=this.observers_.filter(function(t){return t.gatherActive(),t.hasActive()});return t.forEach(function(t){return t.broadcastActive()}),t.length>0},t.prototype.connect_=function(){N&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),G?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},t.prototype.disconnect_=function(){N&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},t.prototype.onTransitionEnd_=function(t){var e=t.propertyName,n=void 0===e?"":e;L.some(function(t){return!!~n.indexOf(t)})&&this.refresh()},t.getInstance=function(){return this.instance_||(this.instance_=new t),this.instance_},t.instance_=null,t}(),Y=function(t,e){for(var n=0,i=Object.keys(e);n<i.length;n++){var s=i[n];Object.defineProperty(t,s,{value:e[s],enumerable:!1,writable:!1,configurable:!0})}return t},J=function(t){return t&&t.ownerDocument&&t.ownerDocument.defaultView||W},X=it(0,0,0,0);function K(t){return parseFloat(t)||0}function Z(t){for(var e=arguments,n=[],i=1;i<arguments.length;i++)n[i-1]=e[i];return n.reduce(function(e,n){return e+K(t["border-"+n+"-width"])},0)}function tt(t){var e=t.clientWidth,n=t.clientHeight;if(!e&&!n)return X;var i=J(t).getComputedStyle(t),s=function(t){for(var e={},n=0,i=["top","right","bottom","left"];n<i.length;n++){var s=i[n],r=t["padding-"+s];e[s]=K(r)}return e}(i),r=s.left+s.right,o=s.top+s.bottom,a=K(i.width),d=K(i.height);if("border-box"===i.boxSizing&&(Math.round(a+r)!==e&&(a-=Z(i,"left","right")+r),Math.round(d+o)!==n&&(d-=Z(i,"top","bottom")+o)),!function(t){return t===J(t).document.documentElement}(t)){var l=Math.round(a+r)-e,h=Math.round(d+o)-n;1!==Math.abs(l)&&(a-=l),1!==Math.abs(h)&&(d-=h)}return it(s.left,s.top,a,d)}var et="undefined"!=typeof SVGGraphicsElement?function(t){return t instanceof J(t).SVGGraphicsElement}:function(t){return t instanceof J(t).SVGElement&&"function"==typeof t.getBBox};function nt(t){return N?et(t)?function(t){var e=t.getBBox();return it(0,0,e.width,e.height)}(t):tt(t):X}function it(t,e,n,i){return{x:t,y:e,width:n,height:i}}var st=function(){function t(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=it(0,0,0,0),this.target=t}return t.prototype.isActive=function(){var t=nt(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},t.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},t}(),rt=function(){return function(t,e){var n,i,s,r,o,a,d,l=(i=(n=e).x,s=n.y,r=n.width,o=n.height,a="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,d=Object.create(a.prototype),Y(d,{x:i,y:s,width:r,height:o,top:s,right:i+r,bottom:o+s,left:i}),d);Y(this,{target:t,contentRect:l})}}(),ot=function(){function t(t,e,n){if(this.activeObservations_=[],this.observations_=new z,"function"!=typeof t)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=e,this.callbackCtx_=n}return t.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof J(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)||(e.set(t,new st(t)),this.controller_.addObserver(this),this.controller_.refresh())}},t.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof J(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)&&(e.delete(t),e.size||this.controller_.removeObserver(this))}},t.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},t.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach(function(e){e.isActive()&&t.activeObservations_.push(e)})},t.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,e=this.activeObservations_.map(function(t){return new rt(t.target,t.broadcastRect())});this.callback_.call(t,e,t),this.clearActive()}},t.prototype.clearActive=function(){this.activeObservations_.splice(0)},t.prototype.hasActive=function(){return this.activeObservations_.length>0},t}(),at="undefined"!=typeof WeakMap?new WeakMap:new z,dt=function(){return function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=Q.getInstance(),i=new ot(e,n,this);at.set(this,i)}}();["observe","unobserve","disconnect"].forEach(function(t){dt.prototype[t]=function(){var e;return(e=at.get(this))[t].apply(e,arguments)}});var lt=void 0!==W.ResizeObserver?W.ResizeObserver:dt,ht={data:function(){return{dimension:null}},props:{id:{type:String},index:{type:Number,required:!0},maxIndex:{type:Number,required:!0},disableResizer:{type:Boolean,default:!1}},mounted:function(){var t=this;this.$parent.$on("dimensions",function(e){t.dimension=e[t.id]?e[t.id]:null}),this.disableResizer||(this.ro=new lt(function(e){e.forEach(function(e,n){if(t&&t.id){var i={id:t.id,dimensions:{w:e.target.offsetWidth,h:e.target.offsetHeight}};t.$parent.$emit("resize-item",i)}})}),this.ro.observe(this.$el))},computed:{styles:function(){return this.dimension&&this.id?"transform: translate3d(0, "+(this.$parent.reversed?-1*this.dimension.top:this.dimension.top)+"px, 0); "+(this.$parent.reversed?"bottom: 0;":"top: 0;"):"transform: translate3d(0, -9999999999999px, 0);"}}},ut=function(){var t=this.$createElement;return(this._self._c||t)("div",{ref:"item",staticClass:"VirtualStream__Item",style:this.styles,attrs:{"data-id":"id"}},[this._t("default")],2)};ut._withStripped=!0;var ct,ft=function(t,e,n,i,s,r,o,a){var d,l=("function"==typeof n?n.options:n)||{};if(l.__file="/Users/dominikbiedebach/www/opensource/vue-virtual-stream/src/components/Item.vue",l.render||(l.render=t.render,l.staticRenderFns=t.staticRenderFns,l._compiled=!0,s&&(l.functional=!0)),l._scopeId=i,e&&(d=function(t){e.call(this,o(t))}),void 0!==d)if(l.functional){var h=l.render;l.render=function(t,e){return d.call(e),h(t,e)}}else{var u=l.beforeCreate;l.beforeCreate=u?[].concat(u,d):[d]}return l}({render:ut,staticRenderFns:[]},function(t){t&&t("data-v-68a4648e_0",{source:"\n.VirtualStream__Item[data-v-68a4648e] {\n    position: absolute;\n    left: 0;\n    right: 0;\n}\n",map:{version:3,sources:["/Users/dominikbiedebach/www/opensource/vue-virtual-stream/src/components/Item.vue"],names:[],mappings:";AAoEA;IACA,mBAAA;IACA,QAAA;IACA,SAAA;CACA",file:"Item.vue",sourcesContent:["<template>\n    <div class=\"VirtualStream__Item\" ref=\"item\" :style=\"styles\" data-id=\"id\">\n        <slot />\n    </div>\n</template>\n\n<script>\nimport ResizeObserver from 'resize-observer-polyfill'\n\nexport default {\n    data() {\n        return {\n            dimension: null,\n        }\n    },\n    props: {\n        id: {\n            type: String,\n        },\n        index: {\n            type: Number,\n            required: true,\n        },\n        maxIndex: {\n            type: Number,\n            required: true,\n        },\n        disableResizer: {\n            type: Boolean,\n            default: false,\n        }\n    },\n    mounted() {\n        this.$parent.$on('dimensions', (d) => {\n            this.dimension = (d[this.id]) ? d[this.id] : null\n        })\n\n        if (!this.disableResizer) {\n            this.ro = new ResizeObserver(elements => {\n                elements.forEach((el, i) => {\n                    if (this && this.id) {\n                        const payload = {\n                            id: this.id,\n                            dimensions: {\n                                w: el.target.offsetWidth,\n                                h: el.target.offsetHeight,\n                            }\n                        }\n                        this.$parent.$emit('resize-item', payload)\n                    }\n                })\n            })\n\n            this.ro.observe(this.$el)\n        }\n    },\n    computed: {\n        styles() {\n            if (!this.dimension || !this.id) return 'transform: translate3d(0, -9999999999999px, 0);'\n            const top = (!this.$parent.reversed) ? this.dimension.top : this.dimension.top * -1\n            const position = (!this.$parent.reversed) ? `top: 0;` : `bottom: 0;`\n            return `transform: translate3d(0, ${top}px, 0); ${position}`\n        }\n    }\n}\n<\/script>\n\n<style scoped>\n    .VirtualStream__Item {\n        position: absolute;\n        left: 0;\n        right: 0;\n    }\n</style>\n"]},media:void 0})},ht,"data-v-68a4648e",!1,0,function t(){var e=document.head||document.getElementsByTagName("head")[0],n=t.styles||(t.styles={}),i="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());return function(t,s){if(!document.querySelector('style[data-vue-ssr-id~="'+t+'"]')){var r=i?s.media||"default":t,o=n[r]||(n[r]={ids:[],parts:[],element:void 0});if(!o.ids.includes(t)){var a=s.source,d=o.ids.length;if(o.ids.push(t),i&&(o.element=o.element||document.querySelector("style[data-group="+r+"]")),!o.element){var l=o.element=document.createElement("style");l.type="text/css",s.media&&l.setAttribute("media",s.media),i&&(l.setAttribute("data-group",r),l.setAttribute("data-next-index","0")),e.appendChild(l)}if(i&&(d=parseInt(o.element.getAttribute("data-next-index")),o.element.setAttribute("data-next-index",d+1)),o.element.styleSheet)o.parts.push(a),o.element.styleSheet.cssText=o.parts.filter(Boolean).join("\n");else{var h=document.createTextNode(a),u=o.element.childNodes;u[d]&&o.element.removeChild(u[d]),u.length?o.element.insertBefore(h,u[d]):o.element.appendChild(h)}}}}}),mt=((ct=navigator.userAgent.toLowerCase()).indexOf("chrome")>-1||ct.indexOf("safari"),{name:"VirtualStream",components:{Item:ft},props:{items:{type:Array,required:!0},reversed:{type:Boolean,default:!1},reverseItems:{type:Boolean,default:!1},count:{type:Number,default:40},offset:{type:Number,default:5},watchResizes:{type:Boolean,default:!0},attachToStart:{type:Boolean,default:!1},attachToEnd:{type:Boolean,default:!1}},data:function(){return{currentView:[],identifier:{ids:{},indexes:[]},position:0,oldPosition:0,oldScrollTop:0,dimensions:{},totalHeight:0,ready:!1,trigger:{start:!1,end:!1},triggerDimensions:!1,newItems:[],receivedNewItems:!1,scrollAttachedTo:!1,oldWindowSize:{width:window.innerWidth,height:window.innerHeight}}},computed:{renderedItems:function(){var t=[].concat(this.items);return this.reverseItems&&t.reverse(),t},itemCount:function(){return this.items.length},correctedCount:function(){return Math.round(this.count/2)}},methods:{getScrollPosition:function(){var t={};return t.start=this.reversed?this.totalHeight-(this.$refs.wrapper.scrollTop+this.$refs.wrapper.offsetHeight):this.$refs.wrapper.scrollTop,t.end=this.reversed?this.totalHeight-this.$refs.wrapper.scrollTop:this.$refs.wrapper.offsetHeight+this.$refs.wrapper.scrollTop,t},updateCurrentPosition:function(t){if(!this.ready&&!t)return!1;var e=this.getScrollPosition();e.end===this.totalHeight&&this.$emit("scroll","end"),e.start<=0?(this.$emit("scroll","start"),this.scrollAttachedTo="start"):e.end===this.totalHeight?(this.$emit("scroll","end"),this.scrollAttachedTo="end"):(this.$emit("scroll",e),this.scrollAttachedTo=!1),this.triggerDimensions&&this.triggerDimensions.start?this.position>0&&e.start<=this.triggerDimensions.start.end&&this.updatePosition(this.trigger.start.id):this.triggerDimensions&&this.triggerDimensions.end&&e.end>=this.triggerDimensions.end.start&&this.updatePosition(this.trigger.end.id),(e.start<this.triggerDimensions.start.start||e.end>this.triggerDimensions.end.end)&&this.updatePositionFromUnknownScrollPosition(e)},updatePositionFromUnknownScrollPosition:function(t){for(var e=Object.values(this.dimensions),n=[],i=0;i<e.length;i++){var s=e[i];this.filterCurrentPosition(s,t)&&n.push(s)}n[0]&&this.updatePosition(n[0].id)},filterCurrentPosition:function(t,e){var n=t.top+t.height;return e.end>=t.top&&e.end<=n},handleScroll:M(function(){var t=this;this.updateCurrentPosition(),window.setTimeout(function(){t.updateCurrentPosition()},150)},100),updatePosition:function(t){this.position=this.identifier.ids[t]},getPreviousItemHeight:function(t){var e,n=this,i=t.id,s=(e=n.identifier.ids[i]-1)>=0&&e,r=function(){var t=!1!==s&&n.identifier.indexes[s];return t||!1}();return this.getItemHeight(r)},getItemHeight:function(t){var e=this.dimensions[t]||!1;return e?e.top+e.height:0},updateItemDimensions:function(){var t=this;this.ready=!1;var e=this.$refs.items.filter(function(t){return null!==t.id}).sort(function(t,e){return t.index>e.index?1:t.index<e.index?-1:0});e.forEach(function(e,n){var i=t.getPreviousItemHeight(e);t.dimensions[e.id]={height:e.$el.offsetHeight,width:e.$el.offsetWidth,id:e.id,top:i}});var n=this.totalHeight;this.oldScrollTop=this.$refs.wrapper?this.$refs.wrapper.scrollTop:this.oldScrollTop;var i=Object.values(this.dimensions);if(this.totalHeight=i.length?i.reduce(function(t,e){return("object"==typeof t?t.height:t)+("object"==typeof e?e.height:e)}):0,1===i.length&&(this.totalHeight=i[0].height),this.receivedNewItems){if(!this.reversed&&0!==this.oldScrollTop&&n<this.totalHeight){var s=Math.abs(this.totalHeight-n);window.requestAnimationFrame(function(){t.$refs.wrapper.style["-webkit-overflow-scrolling"]="auto",t.$refs.wrapper.scrollTop=t.oldScrollTop+s,t.$refs.wrapper.style["-webkit-overflow-scrolling"]="touch"})}}else if(0!==this.oldScrollTop&&this.reversed&&n<this.totalHeight){var r=Math.abs(this.totalHeight-n);window.requestAnimationFrame(function(){t.$refs.wrapper.style["-webkit-overflow-scrolling"]="auto",t.$refs.wrapper.scrollTop=t.oldScrollTop+r,t.$refs.wrapper.style["-webkit-overflow-scrolling"]="touch"})}var o=e.length-1-(this.count-this.offset)<0?1===e.length?1:e.length-1:this.count-this.offset;this.trigger={start:e[0],end:e[e.length-o]},i.length&&(this.triggerDimensions={full:{start:this.dimensions[this.trigger.start.id],end:this.dimensions[this.trigger.end.id]},start:{start:this.dimensions[this.trigger.start.id].top,end:this.dimensions[this.trigger.start.id].top+this.dimensions[this.trigger.start.id].height},end:{start:this.dimensions[this.trigger.end.id].top,end:this.dimensions[this.trigger.end.id].top+this.dimensions[this.trigger.end.id].height}}),this.$refs.track.style.height=this.totalHeight+"px",this.$emit("dimensions",this.dimensions),window.setTimeout(function(){t.ready=!0,t.receivedNewItems=!1},100)},updateItemDimension:function(t){Object.assign(this.dimensions[t.id],t.dimensions)},updateAllDimensions:function(){var t=this;this.$refs.items.filter(function(t){return null!==t.id}).sort(function(t,e){return t.index>e.index?1:t.index<e.index?-1:0});this.$refs.newItems&&this.$refs.newItems.forEach(function(e,n){t.dimensions[e.id]={height:e.$el.offsetHeight,width:e.$el.offsetWidth,id:e.id,top:0}});var e=!!this.$refs.newItems&&(this.$refs.newItems||[]).reduce(function(t,e){return("number"==typeof t?t:t.$el.offsetHeight)+("number"==typeof e?e:e.$el.offsetHeight)},0);Object.keys(this.dimensions).forEach(function(n,i){var s=t.dimensions[n];Object.assign(t.dimensions[n],{top:s.top+e})})},getCurrentView:function(t,e){var n=t-this.correctedCount<0?0:t-this.correctedCount,i=t+this.count>e.length?e.length:t+this.count;return this.renderedItems.slice(n,i)},getIdentifiers:function(t){for(var e=[],n={},i=0;i<t.length;i++)e[i]=t[i].id,n[t[i].id]=i;return{indexes:e,ids:n}},getUpdatedIdentifiers:function(t){for(var e=Object.keys(t),n=this.identifier,i=0;i<e.length;i++){var s=e[i],r=t[s].id?t[s].id:this.renderedItems[s].id;n.indexes[s]=r,n.ids[r]=s}return n}},watch:{items:function(t,e){var n=B(e,t);Object.keys(n).length>0&&(this.currentView=this.getCurrentView(this.position,t))},position:function(t,e){e!==t&&(this.currentView=this.getCurrentView(t,this.items))},renderedItems:function(t,e){var n=B(e,t);Object.keys(n).length>0&&(this.identifier=this.getUpdatedIdentifiers(n))},currentView:function(t){var e=this;this.$nextTick(function(){e.updateItemDimensions(),e.$nextTick(function(){e.updateCurrentPosition()})})},itemCount:function(t,e){var n=this;if(t!==e){var i=Math.abs(t-e),s=this.reverseItems?this.renderedItems.length-i:0;this.newItems=this.renderedItems.slice(s,i),this.receivedNewItems=!0,this.$emit("newitem")}else this.newItems=[],this.receivedNewItems=!1;this.updateAllDimensions(),this.$nextTick(function(){t>e&&(n.attachToStart&&"start"===n.scrollAttachedTo&&(n.$refs.wrapper.scrollTop=n.reversed?n.totalHeight:0),n.attachToEnd&&"end"===n.scrollAttachedTo&&(n.$refs.wrapper.scrollTop=n.reversed?0:n.totalHeight)),n.updateCurrentPosition(!0)})}},created:function(){var t=this;this.$on("resize-item",function(e){t.watchResizes&&(e.dimensions.w===t.dimensions[e.id].width&&e.dimensions.h===t.dimensions[e.id].height||(t.position===t.oldPosition&&t.updateItemDimensions(),window.setTimeout(function(){t.oldPosition=t.position},50)))})},mounted:function(){var t=this;this.currentView=this.getCurrentView(0,this.items),this.identifier=this.getIdentifiers(this.renderedItems),this.$nextTick(function(){t.updateItemDimensions(),t.$refs.wrapper.style["-webkit-overflow-scrolling"]="auto",t.reversed&&(t.$refs.wrapper.scrollTop=t.totalHeight),t.$refs.wrapper.style["-webkit-overflow-scrolling"]="touch",t.updateCurrentPosition(),window.setTimeout(function(){t.ready=!0},100),window.addEventListener("resize",H(function(){var e={width:window.innerWidth,height:window.innerHeight};e.width!==t.oldWindowSize.width&&(t.position=0,t.dimensions={},t.newItems=[],t.oldPosition=0,t.totalHeight=0,t.trigger={start:!1,end:!1},t.triggerDimensions={start:!1,end:!1},t.updateItemDimensions(),t.$refs.wrapper.style["-webkit-overflow-scrolling"]="auto",t.$refs.wrapper&&t.reversed&&(t.$refs.wrapper.scrollTop=t.totalHeight),t.$refs.wrapper.style["-webkit-overflow-scrolling"]="touch"),t.oldWindowSize=e},60))})}}),pt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"container",staticClass:"VirtualStream__Scroller"},[n("div",{ref:"wrapper",staticClass:"VirtualStream__Wrapper",on:{"&scroll":function(e){return t.handleScroll(e)}}},[n("div",{ref:"newItemsList",staticClass:"VirtualStream__Track VirtualStream__Track--newItems"},t._l(t.newItems,function(e,i){return n("Item",{key:e.id,ref:"newItems",refInFor:!0,attrs:{id:e.id,index:i,maxIndex:t.newItems.length,disableResizer:""}},[t._t("default",null,{item:e,index:i})],2)}),1),t._v(" "),n("div",{ref:"track",staticClass:"VirtualStream__Track"},t._l(t.count,function(e){return n("Item",{key:t.currentView[e-1]?t.currentView[e-1].id:null,ref:"items",refInFor:!0,attrs:{id:t.currentView[e-1]?t.currentView[e-1].id:null,index:e-1,maxIndex:t.currentView.length-1}},[t.currentView[e-1]?t._t("default",null,{item:t.currentView[e-1],index:e-1}):t._e()],2)}),1)])])};pt._withStripped=!0;var gt=function(t,e,n,i,s,r,o,a){var d,l=("function"==typeof n?n.options:n)||{};if(l.__file="/Users/dominikbiedebach/www/opensource/vue-virtual-stream/src/components/VirtualStream.vue",l.render||(l.render=t.render,l.staticRenderFns=t.staticRenderFns,l._compiled=!0,s&&(l.functional=!0)),l._scopeId=i,e&&(d=function(t){e.call(this,o(t))}),void 0!==d)if(l.functional){var h=l.render;l.render=function(t,e){return d.call(e),h(t,e)}}else{var u=l.beforeCreate;l.beforeCreate=u?[].concat(u,d):[d]}return l}({render:pt,staticRenderFns:[]},function(t){t&&t("data-v-d8d1b502_0",{source:"\n.VirtualStream__Scroller[data-v-d8d1b502] {\n  height: 100%;\n  left: 0;\n  overflow: auto;\n  position: absolute;\n  top: 0;\n  transform: translate3d(0,0,0);\n  width: 100%;\n}\n.VirtualStream__Wrapper[data-v-d8d1b502] {\n  /* -webkit-overflow-scrolling: touch; */\n  height: 100%;\n  overflow: auto;\n  transform: translate3d(0,0,0);\n  width: 100%;\n}\n.VirtualStream__Track[data-v-d8d1b502] {\n  position: relative;\n}\n.VirtualStream__Track--newItems[data-v-d8d1b502] {\n  left: -99999px;\n  opacity: 0;\n  pointer-events: none;\n  position: absolute;\n  top: 0;\n  transform: translateX(-99999999px);\n  width: 100%;\n}\n.VirtualStream__Items[data-v-d8d1b502] {\n  transform: translate3d(0,0,0);\n}\n",map:{version:3,sources:["/Users/dominikbiedebach/www/opensource/vue-virtual-stream/src/components/VirtualStream.vue"],names:[],mappings:";AA+gBA;EACA,aAAA;EACA,QAAA;EACA,eAAA;EACA,mBAAA;EACA,OAAA;EACA,8BAAA;EACA,YAAA;CACA;AAEA;EACA,wCAAA;EACA,aAAA;EACA,eAAA;EACA,8BAAA;EACA,YAAA;CACA;AAEA;EACA,mBAAA;CACA;AAEA;EACA,eAAA;EACA,WAAA;EACA,qBAAA;EACA,mBAAA;EACA,OAAA;EACA,mCAAA;EACA,YAAA;CACA;AAEA;EACA,8BAAA;CACA",file:"VirtualStream.vue",sourcesContent:["<template>\n  <div class=\"VirtualStream__Scroller\" ref=\"container\">\n    <div class=\"VirtualStream__Wrapper\" ref=\"wrapper\" @scroll.passive=\"handleScroll\">\n      <div class=\"VirtualStream__Track VirtualStream__Track--newItems\" ref=\"newItemsList\">\n        <Item v-for=\"(item, index) in newItems\" :id=\"item.id\" :index=\"index\" :maxIndex=\"newItems.length\" :key=\"item.id\" ref=\"newItems\" disableResizer>\n          <slot :item=\"item\" :index=\"index\" />\n        </Item>\n      </div>\n      <div class=\"VirtualStream__Track\" ref=\"track\">\n        <Item\n          v-for=\"index in count\"\n          :key=\"(currentView[index - 1]) ? currentView[index - 1].id : null\"\n          :id=\"(currentView[index - 1]) ? currentView[index - 1].id : null\"\n          :index=\"index - 1\"\n          :maxIndex=\"currentView.length - 1\"\n          ref=\"items\"\n        >\n          <slot v-if=\"currentView[index - 1]\" :item=\"currentView[index -1]\" :index=\"index - 1\" />\n        </Item>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n  import throttle from 'lodash/throttle'\n  import debounce from 'lodash/debounce'\n  import diff from 'deep-object-diff/dist/diff'\n  import getBrowser from '../utils/getBrowser'\n  import Item from './Item.vue'\n\n  const browser = getBrowser()\n  let locked = false\n\n  export default {\n    name: 'VirtualStream',\n    components: {\n      Item\n    },\n    props: {\n      items: {\n        type: Array,\n        required: true,\n      },\n      reversed: {\n        type: Boolean,\n        default: false,\n      },\n      reverseItems: {\n        type: Boolean,\n        default: false,\n      },\n      count: {\n        type: Number,\n        default: 40,\n      },\n      offset: {\n        type: Number,\n        default: 5,\n      },\n      watchResizes: {\n        type: Boolean,\n        default: true,\n      },\n      attachToStart: {\n        type: Boolean,\n        default: false,\n      },\n      attachToEnd: {\n        type: Boolean,\n        default: false,\n      },\n    },\n    data() {\n      return {\n        currentView: [],\n        identifier: {\n          ids: {},\n          indexes: [],\n        },\n        position: 0,\n        oldPosition: 0,\n        oldScrollTop: 0,\n        dimensions: {},\n        totalHeight: 0,\n        ready: false,\n        trigger: {\n          start: false,\n          end: false,\n        },\n        triggerDimensions: false,\n        newItems: [],\n        receivedNewItems: false,\n        scrollAttachedTo: false,\n        oldWindowSize: {\n          width: window.innerWidth,\n          height: window.innerHeight,\n        },\n      }\n    },\n    computed: {\n      renderedItems() {\n        const output = [...this.items]\n        if (this.reverseItems) output.reverse()\n        return output\n      },\n      itemCount() {\n        return this.items.length\n      },\n      correctedCount() {\n        return Math.round(this.count / 2)\n      },\n    },\n    methods: {\n      \n      /**\n       * retreives the current scroll positions for the screen start and end edges\n       * @returns {object}\n       */\n      getScrollPosition() {\n        const positions = {}\n        positions.start = (!this.reversed) ?\n          this.$refs.wrapper.scrollTop :\n          this.totalHeight - (this.$refs.wrapper.scrollTop + this.$refs.wrapper.offsetHeight)\n\n        positions.end = (!this.reversed) ?\n          this.$refs.wrapper.offsetHeight + this.$refs.wrapper.scrollTop :\n          this.totalHeight - this.$refs.wrapper.scrollTop\n        \n        return positions\n      },\n\n      /**\n       * calculates and updates the current position dependend on the current scroll position\n       * @param {boolean} force\n       * @returns {void}\n       */\n      updateCurrentPosition(force) {\n        if (!this.ready && !force) return false\n        \n        const positions = this.getScrollPosition()\n        if (positions.end === this.totalHeight) this.$emit('scroll', 'end')\n\n        if (positions.start <= 0) {\n          this.$emit('scroll', 'start')\n          this.scrollAttachedTo = 'start'\n        } else if (positions.end === this.totalHeight) {\n          this.$emit('scroll', 'end')\n          this.scrollAttachedTo = 'end'\n        } else {\n          this.$emit('scroll', positions)\n          this.scrollAttachedTo = false\n        }\n        \n        if (this.triggerDimensions && this.triggerDimensions.start) {\n          if (this.position > 0 && (positions.start <= this.triggerDimensions.start.end)) {\n            this.updatePosition(this.trigger.start.id)\n          }\n        } else if (this.triggerDimensions && this.triggerDimensions.end) {\n          if (positions.end >= this.triggerDimensions.end.start) {\n            this.updatePosition(this.trigger.end.id)\n          }\n        }\n\n        if (positions.start < this.triggerDimensions.start.start || positions.end > this.triggerDimensions.end.end) {\n          this.updatePositionFromUnknownScrollPosition(positions)\n        }\n      },\n\n      /**\n       * updates the virtualization position when the scroll position is not in any dimension of the currently rendered items\n       * (when scrolled very fast to a speficic position)\n       * @param {object} positions\n       * @returns {void}\n       */\n      updatePositionFromUnknownScrollPosition(positions) {\n        const dimensions = Object.values(this.dimensions)\n        let currentPosition = []\n        for (let i = 0; i < dimensions.length; i++) {\n          const dimension = dimensions[i]\n          if (this.filterCurrentPosition(dimension, positions)) currentPosition.push(dimension)\n        }\n        if (currentPosition[0]) {\n          this.updatePosition(currentPosition[0].id)\n        }\n      },\n\n      /**\n       * filters through all positions\n       * @param {object} dimension\n       * @param {object} positions\n       * @returns {boolean}\n       */\n      filterCurrentPosition(dimension, positions) {\n        const dimensionEnd = dimension.top + dimension.height\n        return ((positions.end >= dimension.top && positions.end <= dimensionEnd))\n      },\n      \n      /**\n       * handles the scroll position when the wrapper is scrolled\n       * @returns {void}\n       */\n      handleScroll: throttle(function() {\n        this.updateCurrentPosition()\n        window.setTimeout(() => {\n          this.updateCurrentPosition()\n        }, 150)\n      }, 100),\n      \n      /**\n       * updates the current virtualization position to a specific id\n       * @param {number} id\n       * @returns {void}\n       */\n      updatePosition(id) {\n        this.position = this.identifier.ids[id]\n      },\n\n      /**\n       * gets the item height of the previous item\n       * @param {object} item\n       * @returns {number}\n       */\n      getPreviousItemHeight(item) {\n        const id = item.id\n\n        const previousIndex = (() => {\n          const index = this.identifier.ids[id] - 1\n          return (index >= 0) ? index : false\n        })()\n\n        const previousId = (() => {\n          const id = (previousIndex !== false) ? this.identifier.indexes[previousIndex] : false\n          return (id) ? id : false\n        })()\n\n        return this.getItemHeight(previousId)\n      },\n      \n      /**\n       * Gets the height from an item via the dimensions object\n       * @param {number} id\n       * @returns {number}\n       */\n      getItemHeight(id) {\n        const dimensionItem = this.dimensions[id] || false\n        return (dimensionItem) ? dimensionItem.top + dimensionItem.height : 0\n      },\n      \n      /**\n       * Updates item dimensions known to the component via mapping through the currently rendered items and recalculating their heights and top positions\n       */\n      updateItemDimensions() {\n        this.ready = false\n        const sortedItems = this.$refs.items.filter((item) => {\n          return (item.id !== null)\n        }).sort((a, b) => {\n          if (a.index > b.index) return 1\n          if (a.index < b.index) return -1\n          return 0\n        })\n\n        sortedItems.forEach((item, i) => {\n          const top = this.getPreviousItemHeight(item)\n          this.dimensions[item.id] = { height: item.$el.offsetHeight, width: item.$el.offsetWidth, id: item.id, top }\n        })\n\n        const oldTotalHeight = this.totalHeight\n        this.oldScrollTop = (this.$refs.wrapper) ? this.$refs.wrapper.scrollTop : this.oldScrollTop\n\n        const dimensionArray = Object.values(this.dimensions)\n        this.totalHeight = (!dimensionArray.length) ? 0 : dimensionArray.reduce((dimensionA, dimensionB) => {\n          const aVal = (typeof dimensionA === 'object') ? dimensionA.height : dimensionA\n          const bVal = (typeof dimensionB === 'object') ? dimensionB.height : dimensionB\n          return aVal + bVal\n        })\n        if (dimensionArray.length === 1) this.totalHeight = dimensionArray[0].height\n\n        if (this.receivedNewItems) {\n          if (!this.reversed) {\n            if (this.oldScrollTop !== 0) {\n              if (oldTotalHeight < this.totalHeight) {\n                const heightDiff = Math.abs(this.totalHeight - oldTotalHeight)\n                window.requestAnimationFrame(() => {\n                  this.$refs.wrapper.style['-webkit-overflow-scrolling'] = 'auto'\n                  this.$refs.wrapper.scrollTop = this.oldScrollTop + heightDiff\n                  this.$refs.wrapper.style['-webkit-overflow-scrolling'] = 'touch'\n                })\n              }\n            }  \n          }\n        } else {\n          if (this.oldScrollTop !== 0) {\n            if (this.reversed && oldTotalHeight < this.totalHeight) {\n              const heightDiff = Math.abs(this.totalHeight - oldTotalHeight)\n              window.requestAnimationFrame(() => {\n                this.$refs.wrapper.style['-webkit-overflow-scrolling'] = 'auto'\n                this.$refs.wrapper.scrollTop = this.oldScrollTop + heightDiff\n                this.$refs.wrapper.style['-webkit-overflow-scrolling'] = 'touch'\n              })\n            }\n          }\n        }\n\n        const startIndex = 0\n        const endIndex = ((sortedItems.length - 1) - (this.count - this.offset) < 0) ?  (sortedItems.length === 1) ? 1 : sortedItems.length - 1 : this.count - this.offset\n\n        this.trigger = {\n          start: sortedItems[startIndex],\n          end: sortedItems[sortedItems.length - endIndex]\n        }\n\n        if (dimensionArray.length) {\n          this.triggerDimensions = {\n            full: {\n              start: this.dimensions[this.trigger.start.id],\n              end: this.dimensions[this.trigger.end.id],\n            },\n            start: {\n              start: this.dimensions[this.trigger.start.id].top,\n              end: this.dimensions[this.trigger.start.id].top + this.dimensions[this.trigger.start.id].height\n            },\n            end: {\n              start: this.dimensions[this.trigger.end.id].top,\n              end: this.dimensions[this.trigger.end.id].top + this.dimensions[this.trigger.end.id].height\n            }\n          }\n        }\n\n        this.$refs.track.style.height = this.totalHeight + 'px'\n        this.$emit('dimensions', this.dimensions)\n\n        window.setTimeout(() => {\n          this.ready = true\n          this.receivedNewItems = false\n        }, 100)\n      },\n\n      /**\n       * update the dimension of a specific item\n       * @param {object} item\n       */\n      updateItemDimension(item) {\n        Object.assign(this.dimensions[item.id], item.dimensions)\n      },\n\n      /**\n       * update all dimensions with the height of all new items\n       * used when new items are added to the list of virtualized items\n       * @returns {void}\n       */\n      updateAllDimensions() {\n        const sortedItems = this.$refs.items.filter((item) => {\n          return (item.id !== null)\n        }).sort((a, b) => {\n          if (a.index > b.index) return 1\n          if (a.index < b.index) return -1\n          return 0\n        })\n\n        if (this.$refs.newItems) {\n          this.$refs.newItems.forEach((item, i) => {\n            this.dimensions[item.id] = { height: item.$el.offsetHeight, width: item.$el.offsetWidth, id: item.id, top: 0 }\n          })\n        }\n\n        const newItemHeight = (!this.$refs.newItems) ? false : (this.$refs.newItems || []).reduce((a, b) => {\n          const aVal = (typeof a === 'number') ? a : a.$el.offsetHeight\n          const bVal = (typeof b === 'number') ? b : b.$el.offsetHeight\n          return aVal + bVal\n        }, 0)\n\n        const newDimensions = {}\n\n        Object.keys(this.dimensions).forEach((key, i) => {\n          const dimension = this.dimensions[key]\n          Object.assign(this.dimensions[key], { top: dimension.top + newItemHeight })\n        })\n      },\n      getCurrentView(position, items) {\n        const startPos = (position - this.correctedCount < 0) ? 0 : position - this.correctedCount\n        const endPos = (position + this.count > items.length) ? items.length : position + this.count\n        return this.renderedItems.slice(startPos, endPos)\n      },\n      getIdentifiers(items) {\n        let indexes = []\n        let ids = {}\n\n        for(let i = 0; i < items.length; i++) {\n          indexes[i] = items[i].id\n          ids[items[i].id] = i\n        }\n        return { indexes, ids }\n      },\n      getUpdatedIdentifiers(itemDiff) {\n        const indexes = Object.keys(itemDiff)\n        const currentIdentifiers = this.identifier\n\n        for (let i = 0; i < indexes.length; i++) {\n          const index = indexes[i]\n          const id = (itemDiff[index].id) ? itemDiff[index].id : this.renderedItems[index].id\n          \n          currentIdentifiers.indexes[index] = id\n          currentIdentifiers.ids[id] = index\n        }\n\n        return currentIdentifiers\n      },\n    },\n    watch: {\n      items(newItems, oldItems) {\n        const itemDiff = diff(oldItems, newItems)\n        if (Object.keys(itemDiff).length > 0) {\n          this.currentView = this.getCurrentView(this.position, newItems)\n        }\n      },\n      position(newPosition, oldPosition) {\n        if (oldPosition !== newPosition) {\n          this.currentView = this.getCurrentView(newPosition, this.items)\n        }\n      },\n      renderedItems(newRenderedItems, oldRenderedItems) {\n        const itemDiff = diff(oldRenderedItems, newRenderedItems)\n        if (Object.keys(itemDiff).length > 0) {\n          this.identifier = this.getUpdatedIdentifiers(itemDiff)\n        }\n      },\n      currentView(n) {\n        this.$nextTick(() => {\n          this.updateItemDimensions()\n          this.$nextTick(() => {\n            this.updateCurrentPosition()\n          })\n        })\n      },\n      itemCount(newVal, oldVal) {\n        if (newVal !== oldVal) {\n          const diffCount = Math.abs(newVal - oldVal)\n          const index = (!this.reverseItems) ? 0 : this.renderedItems.length - diffCount\n          this.newItems = this.renderedItems.slice(index, diffCount)\n          this.receivedNewItems = true\n          this.$emit('newitem')\n        } else {\n          this.newItems = []\n          this.receivedNewItems = false\n        }\n\n        this.updateAllDimensions()\n        \n        this.$nextTick(() => {\n          if (newVal > oldVal) {\n            if (this.attachToStart && this.scrollAttachedTo === 'start') {\n              this.$refs.wrapper.scrollTop = (!this.reversed) ? 0 : this.totalHeight\n            }\n\n            if (this.attachToEnd && this.scrollAttachedTo === 'end') {\n              this.$refs.wrapper.scrollTop = (!this.reversed) ? this.totalHeight : 0\n            }\n          }\n          this.updateCurrentPosition(true)\n        })\n      }\n    },\n    created() {\n      this.$on('resize-item', (data) => {\n        if (this.watchResizes) {\n          if (data.dimensions.w !== this.dimensions[data.id].width || data.dimensions.h !== this.dimensions[data.id].height) {\n            if (this.position === this.oldPosition) {\n              this.updateItemDimensions()\n            }\n            window.setTimeout(() => {\n              this.oldPosition = this.position\n            }, 50)\n          }\n        }\n      })\n    },\n    mounted() {\n      this.currentView = this.getCurrentView(0, this.items)\n      this.identifier = this.getIdentifiers(this.renderedItems)\n      this.$nextTick(() => {\n        this.updateItemDimensions()\n        this.$refs.wrapper.style['-webkit-overflow-scrolling'] = 'auto'\n        if (this.reversed) this.$refs.wrapper.scrollTop = this.totalHeight\n        this.$refs.wrapper.style['-webkit-overflow-scrolling'] = 'touch'\n\n        this.updateCurrentPosition()\n\n        window.setTimeout(() => {\n          this.ready = true\n        }, 100)\n\n        window.addEventListener('resize', debounce(() => {\n          const windowSize = {\n            width: window.innerWidth,\n            height: window.innerHeight,\n          }\n\n          if (windowSize.width !== this.oldWindowSize.width) {\n            this.position = 0\n            this.dimensions = {}\n            this.newItems = []\n            this.oldPosition = 0\n            this.totalHeight = 0\n            this.trigger = {\n              start: false,\n              end: false,\n            }\n            this.triggerDimensions = {\n              start: false,\n              end: false,\n            }\n  \n            this.updateItemDimensions()\n            this.$refs.wrapper.style['-webkit-overflow-scrolling'] = 'auto'\n            if (this.$refs.wrapper && this.reversed) this.$refs.wrapper.scrollTop = this.totalHeight\n            this.$refs.wrapper.style['-webkit-overflow-scrolling'] = 'touch'\n          }\n\n          this.oldWindowSize = windowSize\n        }, 60))\n      })\n    }\n  }\n<\/script>\n\n<style scoped>\n  .VirtualStream__Scroller {\n    height: 100%;\n    left: 0;\n    overflow: auto;\n    position: absolute;\n    top: 0;\n    transform: translate3d(0,0,0);\n    width: 100%;\n  }\n\n  .VirtualStream__Wrapper {\n    /* -webkit-overflow-scrolling: touch; */\n    height: 100%;\n    overflow: auto;\n    transform: translate3d(0,0,0);\n    width: 100%;\n  }\n\n  .VirtualStream__Track {\n    position: relative;\n  }\n\n  .VirtualStream__Track--newItems {\n    left: -99999px;\n    opacity: 0;\n    pointer-events: none;\n    position: absolute;\n    top: 0;\n    transform: translateX(-99999999px);\n    width: 100%;\n  }\n\n  .VirtualStream__Items {\n    transform: translate3d(0,0,0);\n  }\n</style>\n"]},media:void 0})},mt,"data-v-d8d1b502",!1,0,function t(){var e=document.head||document.getElementsByTagName("head")[0],n=t.styles||(t.styles={}),i="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());return function(t,s){if(!document.querySelector('style[data-vue-ssr-id~="'+t+'"]')){var r=i?s.media||"default":t,o=n[r]||(n[r]={ids:[],parts:[],element:void 0});if(!o.ids.includes(t)){var a=s.source,d=o.ids.length;if(o.ids.push(t),i&&(o.element=o.element||document.querySelector("style[data-group="+r+"]")),!o.element){var l=o.element=document.createElement("style");l.type="text/css",s.media&&l.setAttribute("media",s.media),i&&(l.setAttribute("data-group",r),l.setAttribute("data-next-index","0")),e.appendChild(l)}if(i&&(d=parseInt(o.element.getAttribute("data-next-index")),o.element.setAttribute("data-next-index",d+1)),o.element.styleSheet)o.parts.push(a),o.element.styleSheet.cssText=o.parts.filter(Boolean).join("\n");else{var h=document.createTextNode(a),u=o.element.childNodes;u[d]&&o.element.removeChild(u[d]),u.length?o.element.insertBefore(h,u[d]):o.element.appendChild(h)}}}}});var vt={install:function t(e){t.installed||(t.installed=!0,e.component("VirtualStream",gt))}},wt=null;"undefined"!=typeof window?wt=window.Vue:void 0!==t&&(wt=t.Vue),wt&&wt.use(vt),e.a=gt}).call(e,n("DuR2"))}},["NHnr"]);
//# sourceMappingURL=app.f9bf97b9168344e6ec1b.js.map
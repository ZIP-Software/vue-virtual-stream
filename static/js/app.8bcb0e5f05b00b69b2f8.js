webpackJsonp([1],{G2A0:function(t,e){},H4Po:function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("7+uW"),s=n("8f98"),r=n.n(s),o=n("FfS/"),a=n.n(o),d=n("DtRx"),l=n.n(d),h=n("bxQx"),u={props:{data:{type:Object,required:!0}}},m={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"Message"},[n("div",{staticClass:"Message__Wrapper",class:{"Message__Wrapper--isAuthor":t.data.isRight}},[n("div",{staticClass:"Message__Bubble",class:{"Message__Bubble--isAuthor":t.data.isRight}},[t.data.isRight?t._e():n("div",{staticClass:"Author"},[n("img",{staticClass:"Author__Avatar",attrs:{src:t.data.avatar,alt:t.data.author}}),t._v(" "),n("span",{staticClass:"Author__Name"},[t._v(t._s(t.data.author))])]),t._v(" "),n("div",{staticClass:"Text"},[t._v("\n        "+t._s(t.data.index)),n("br"),t._v("\n        "+t._s(t.data.message)),n("br"),t._v("\n        "+t._s(t.data.id)+"\n      ")])]),t._v(" "),t.data.attachment?n("div",{staticClass:"Attachment",class:{"Attachment--isAuthor":t.data.isRight}},[n("div",{staticClass:"Attachment__Overlay"},[n("div",{staticClass:"Attachment__Author"},[t._v(t._s(t.data.author))])]),t._v(" "),n("img",{staticClass:"Attachment__Preview",attrs:{src:t.data.attachment}})]):t._e()])])},staticRenderFns:[]};var c=n("VU/8")(u,m,!1,function(t){n("vSdX")},"data-v-1dd70994",null).exports,f={name:"App",components:{VirtualStream:h.a,Message:c},data(){return{items:this.generateMessages(300)}},methods:{generateMessages(t){const e=[];for(let n=0;n<t;n++)e.push(this.generateMessage(n));return e},generateMessage(t){const e=Math.floor(10*Math.random())>7,n=Math.floor(20*Math.random())>16;return{id:l()(),index:t,author:a.a.name.findName(),avatar:a.a.fake("{{image.avatar}}"),message:r()({sentenceLowerBound:5,sentenceUpperBound:30}),attachment:n?a.a.fake("{{image.imageUrl}}"):null,isRight:e}},addMessage(){this.items.unshift(this.generateMessage(this.items.length))},handleScroll:t=>"start"===t?(console.log("scrolled to start"),!1):"end"===t?(console.log("scrolled to end"),!1):void console.log(t)},mounted(){this.stream=this.$refs.stream}},p={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"app",attrs:{id:"app"}},[e("div",{staticClass:"container"},[e("div",{staticClass:"container-inner"},[e("virtual-stream",{ref:"stream",attrs:{items:this.items,count:80,offset:20},on:{scroll:this.handleScroll},scopedSlots:this._u([{key:"default",fn:function(t){var n=t.item;return[e("Message",{attrs:{data:n}})]}}])})],1),this._v(" "),e("div",{staticClass:"toolbar"},[e("div",[e("button",{on:{click:this.addMessage}},[this._v("Add message")]),e("br")])])])])},staticRenderFns:[]};var g=n("VU/8")(f,p,!1,function(t){n("G2A0"),n("H4Po"),n("gyDf")},"data-v-482ad6f2",null).exports;i.a.config.productionTip=!1,new i.a({el:"#app",components:{App:g},template:"<App/>"})},bxQx:function(t,e,n){"use strict";(function(t){var n=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},i="undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{},s="object"==typeof i&&i&&i.Object===Object&&i,r="object"==typeof self&&self&&self.Object===Object&&self,o=s||r||Function("return this")(),a=function(){return o.Date.now()},d=o.Symbol,l=Object.prototype,h=l.hasOwnProperty,u=l.toString,m=d?d.toStringTag:void 0;var c=function(t){var e=h.call(t,m),n=t[m];try{t[m]=void 0}catch(t){}var i=u.call(t);return e?t[m]=n:delete t[m],i},f=Object.prototype.toString;var p=function(t){return f.call(t)},g="[object Null]",v="[object Undefined]",w=d?d.toStringTag:void 0;var A=function(t){return null==t?void 0===t?v:g:w&&w in Object(t)?c(t):p(t)};var b=function(t){return null!=t&&"object"==typeof t},x="[object Symbol]";var y=function(t){return"symbol"==typeof t||b(t)&&A(t)==x},_=NaN,I=/^\s+|\s+$/g,$=/^[-+]0x[0-9a-f]+$/i,C=/^0b[01]+$/i,S=/^0o[0-7]+$/i,V=parseInt;var T=function(t){if("number"==typeof t)return t;if(y(t))return _;if(n(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=n(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(I,"");var i=C.test(t);return i||S.test(t)?V(t.slice(2),i?2:8):$.test(t)?_:+t},H="Expected a function",k=Math.max,E=Math.min;var D=function(t,e,i){var s,r,o,d,l,h,u=0,m=!1,c=!1,f=!0;if("function"!=typeof t)throw new TypeError(H);function p(e){var n=s,i=r;return s=r=void 0,u=e,d=t.apply(i,n)}function g(t){var n=t-h;return void 0===h||n>=e||n<0||c&&t-u>=o}function v(){var t=a();if(g(t))return w(t);l=setTimeout(v,function(t){var n=e-(t-h);return c?E(n,o-(t-u)):n}(t))}function w(t){return l=void 0,f&&s?p(t):(s=r=void 0,d)}function A(){var t=a(),n=g(t);if(s=arguments,r=this,h=t,n){if(void 0===l)return function(t){return u=t,l=setTimeout(v,e),m?p(t):d}(h);if(c)return l=setTimeout(v,e),p(h)}return void 0===l&&(l=setTimeout(v,e)),d}return e=T(e)||0,n(i)&&(m=!!i.leading,o=(c="maxWait"in i)?k(T(i.maxWait)||0,e):o,f="trailing"in i?!!i.trailing:f),A.cancel=function(){void 0!==l&&clearTimeout(l),u=0,s=h=r=l=void 0},A.flush=function(){return void 0===l?d:w(a())},A},P="Expected a function";var N=function(t,e,i){var s=!0,r=!0;if("function"!=typeof t)throw new TypeError(P);return n(i)&&(s="leading"in i?!!i.leading:s,r="trailing"in i?!!i.trailing:r),D(t,e,{leading:s,maxWait:e,trailing:r})},M={data:function(){return{dimension:null}},props:{id:{type:String},index:{type:Number,required:!0},maxIndex:{type:Number,required:!0}},mounted:function(){var t=this;this.$parent.$on("dimensions",function(e){t.dimension=e[t.id]?e[t.id]:null}),this.ro=new ResizeObserver(function(e){e.forEach(function(e,n){t.id&&t.$emit("resizeitem",{id:t.id,dimensions:{w:e.target.offsetWidth,h:e.target.offsetHeight}})})}),this.ro.observe(this.$el)},computed:{styles:function(){return this.dimension&&this.id?"transform: translate3d(0, "+(this.$parent.reversed?-1*this.dimension.top:this.dimension.top)+"px, 0); "+(this.$parent.reversed?"bottom: 0;":"top: 0;"):"transform: translate3d(0, -9999999999999px, 0);"}}},O=function(){var t=this.$createElement;return(this._self._c||t)("div",{ref:"item",staticClass:"VirtualStream__Item",style:this.styles,attrs:{"data-id":"id"}},[this._t("default")],2)};O._withStripped=!0;var j,B=function(t,e,n,i,s,r,o,a){var d,l=("function"==typeof n?n.options:n)||{};if(l.__file="/Users/dominikbiedebach/www/opensource/vue-virtual-stream/src/components/Item.vue",l.render||(l.render=t.render,l.staticRenderFns=t.staticRenderFns,l._compiled=!0,s&&(l.functional=!0)),l._scopeId=i,e&&(d=function(t){e.call(this,o(t))}),void 0!==d)if(l.functional){var h=l.render;l.render=function(t,e){return d.call(e),h(t,e)}}else{var u=l.beforeCreate;l.beforeCreate=u?[].concat(u,d):[d]}return l}({render:O,staticRenderFns:[]},function(t){t&&t("data-v-72089486_0",{source:"\n.VirtualStream__Item[data-v-72089486] {\n    position: absolute;\n    left: 0;\n    right: 0;\n}\n",map:{version:3,sources:["/Users/dominikbiedebach/www/opensource/vue-virtual-stream/src/components/Item.vue"],names:[],mappings:";AA2DA;IACA,mBAAA;IACA,QAAA;IACA,SAAA;CACA",file:"Item.vue",sourcesContent:['<template>\n    <div class="VirtualStream__Item" ref="item" :style="styles" data-id="id">\n        <slot />\n    </div>\n</template>\n\n<script>\nexport default {\n    data() {\n        return {\n            dimension: null\n        }\n    },\n    props: {\n        id: {\n            type: String,\n        },\n        index: {\n            type: Number,\n            required: true,\n        },\n        maxIndex: {\n            type: Number,\n            required: true,\n        }\n    },\n    mounted() {\n        this.$parent.$on(\'dimensions\', (d) => {\n            this.dimension = (d[this.id]) ? d[this.id] : null\n        })\n\n        this.ro = new ResizeObserver(elements => {\n            elements.forEach((el, i) => {\n                if (this.id) {\n                    this.$emit(\'resizeitem\', {\n                        id: this.id,\n                        dimensions: {\n                            w: el.target.offsetWidth,\n                            h: el.target.offsetHeight,\n                        }\n                    })\n                }\n            })\n        })\n\n        this.ro.observe(this.$el)\n    },\n    computed: {\n        styles() {\n            if (!this.dimension || !this.id) return \'transform: translate3d(0, -9999999999999px, 0);\'\n            const top = (!this.$parent.reversed) ? this.dimension.top : this.dimension.top * -1\n            const position = (!this.$parent.reversed) ? `top: 0;` : `bottom: 0;`\n            return `transform: translate3d(0, ${top}px, 0); ${position}`\n        }\n    }\n}\n<\/script>\n\n<style scoped>\n    .VirtualStream__Item {\n        position: absolute;\n        left: 0;\n        right: 0;\n    }\n</style>\n']},media:void 0})},M,"data-v-72089486",!1,0,function t(){var e=document.head||document.getElementsByTagName("head")[0],n=t.styles||(t.styles={}),i="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());return function(t,s){if(!document.querySelector('style[data-vue-ssr-id~="'+t+'"]')){var r=i?s.media||"default":t,o=n[r]||(n[r]={ids:[],parts:[],element:void 0});if(!o.ids.includes(t)){var a=s.source,d=o.ids.length;if(o.ids.push(t),i&&(o.element=o.element||document.querySelector("style[data-group="+r+"]")),!o.element){var l=o.element=document.createElement("style");l.type="text/css",s.media&&l.setAttribute("media",s.media),i&&(l.setAttribute("data-group",r),l.setAttribute("data-next-index","0")),e.appendChild(l)}if(i&&(d=parseInt(o.element.getAttribute("data-next-index")),o.element.setAttribute("data-next-index",d+1)),o.element.styleSheet)o.parts.push(a),o.element.styleSheet.cssText=o.parts.filter(Boolean).join("\n");else{var h=document.createTextNode(a),u=o.element.childNodes;u[d]&&o.element.removeChild(u[d]),u.length?o.element.insertBefore(h,u[d]):o.element.appendChild(h)}}}}}),R=((j=navigator.userAgent.toLowerCase()).indexOf("chrome")>-1||j.indexOf("safari"),{name:"VirtualStream",components:{Item:B},props:{items:{type:Array,required:!0},reversed:{type:Boolean,default:!1},count:{type:Number,default:40},offset:{type:Number,default:5}},data:function(){return{position:0,dimensions:{},totalHeight:0,ready:!1,trigger:{start:!1,end:!1},triggerDimensions:!1,newItems:[],receivedNewItems:!1}},computed:{itemCount:function(){return this.items.length},correctedCount:function(){return Math.round(this.count/2)},currentView:function(){var t=this.position-this.correctedCount<0?0:this.position-this.correctedCount,e=this.position+this.correctedCount>this.items.length?this.items.length:this.position+this.correctedCount;return this.items.slice(t,e)},identifier:function(){var t=[],e={};return this.items.forEach(function(n,i){t[i]=n.id,e[n.id]=i}),{indexes:t,ids:e}}},methods:{updateCurrentPosition:function(t){var e={};if(e.start=this.reversed?this.totalHeight-(this.$refs.wrapper.scrollTop+this.$refs.wrapper.offsetHeight):this.$refs.wrapper.scrollTop,e.end=this.reversed?this.totalHeight-this.$refs.wrapper.scrollTop:this.$refs.wrapper.offsetHeight+this.$refs.wrapper.scrollTop,e.end===this.totalHeight&&this.$emit("scroll","end"),0===e.start?this.$emit("scroll","start"):e.end===this.totalHeight?this.$emit("scroll","end"):this.$emit("scroll",e),!this.ready&&!t)return!1;if(this.triggerDimensions&&this.triggerDimensions.start&&this.position>0&&e.start<=this.triggerDimensions.start.end&&this.updatePosition(this.trigger.start.id),this.triggerDimensions&&this.triggerDimensions.end&&e.end>=this.triggerDimensions.end.start&&this.updatePosition(this.trigger.end.id),e.start<this.triggerDimensions.start.start||e.end>this.triggerDimensions.end.end){var n=Object.values(this.dimensions).filter(function(t){var n=t.top+t.height;return e.end>=t.top&&e.end<=n});n[0]&&this.updatePosition(n[0].id)}},handleScroll:N(function(){this.updateCurrentPosition()},100),updatePosition:function(t){this.position=this.identifier.ids[t]},getPreviousItemHeight:function(t){var e,n=this,i=t.id,s=(e=n.identifier.ids[i]-1)>=0&&e,r=function(){var t=!1!==s&&n.identifier.indexes[s];return t||!1}();return this.getItemHeight(r)},getItemHeight:function(t){var e=this.dimensions[t]||!1;return e?e.top+e.height:0},updateItemDimensions:function(){var t=this;this.ready=!1;var e=this.$refs.items.filter(function(t){return null!==t.id}).sort(function(t,e){return t.index>e.index?1:t.index<e.index?-1:0});e.forEach(function(e,n){var i=t.getPreviousItemHeight(e);t.dimensions[e.id]={height:e.$el.offsetHeight,width:e.$el.offsetWidth,id:e.id,top:i}});var n=this.totalHeight,i=this.$refs.wrapper.scrollTop;if(this.totalHeight=Object.values(this.dimensions).reduce(function(t,e){return(t.height?t.height:t)+(e.height?e.height:e)}),this.receivedNewItems){if(!this.reversed&&0!==i&&n<this.totalHeight){var s=Math.abs(this.totalHeight-n);window.requestAnimationFrame(function(){t.$refs.wrapper.style["-webkit-overflow-scrolling"]="auto",t.$refs.wrapper.scrollTop=i+s,t.$refs.wrapper.style["-webkit-overflow-scrolling"]="touch"})}}else if(0!==i&&this.reversed&&n<this.totalHeight){var r=Math.abs(this.totalHeight-n);window.requestAnimationFrame(function(){t.$refs.wrapper.style["-webkit-overflow-scrolling"]="auto",t.$refs.wrapper.scrollTop=i+r,t.$refs.wrapper.style["-webkit-overflow-scrolling"]="touch"})}this.trigger={start:e[0],end:e[e.length-this.offset]},this.triggerDimensions={full:{start:this.dimensions[this.trigger.start.id],end:this.dimensions[this.trigger.end.id]},start:{start:this.dimensions[this.trigger.start.id].top,end:this.dimensions[this.trigger.start.id].top+this.dimensions[this.trigger.start.id].height},end:{start:this.dimensions[this.trigger.end.id].top,end:this.dimensions[this.trigger.end.id].top+this.dimensions[this.trigger.end.id].height}},this.$refs.track.style.height=this.totalHeight+"px",this.$emit("dimensions",this.dimensions),window.setTimeout(function(){t.ready=!0,t.receivedNewItems=!1},100)},updateItemDimension:function(t){Object.assign(this.dimensions[t.id],t.dimensions)},updateAllDimensions:function(){var t=this;this.$refs.items.filter(function(t){return null!==t.id}).sort(function(t,e){return t.index>e.index?1:t.index<e.index?-1:0});this.$refs.newItems&&this.$refs.newItems.forEach(function(e,n){t.dimensions[e.id]={height:e.$el.offsetHeight,width:e.$el.offsetWidth,id:e.id,top:0}});var e=!!this.$refs.newItems&&this.$refs.newItems.reduce(function(t,e){return("number"==typeof t?t:t.$el.offsetHeight)+("number"==typeof e?e:e.$el.offsetHeight)},0);Object.keys(this.dimensions).forEach(function(n,i){var s=t.dimensions[n];Object.assign(t.dimensions[n],{top:s.top+e})})}},watch:{currentView:function(t){var e=this;this.$nextTick(function(){e.updateItemDimensions(),e.$nextTick(function(){e.updateCurrentPosition()})})},itemCount:function(t,e){var n=this;if(t!==e){var i=Math.abs(t-e);this.newItems=this.items.slice(0,i),this.receivedNewItems=!0,this.$emit("newitem")}else this.newItems=[],this.receivedNewItems=!1;this.updateAllDimensions(),this.$nextTick(function(){n.updateCurrentPosition(!0)})}},mounted:function(){var t=this;this.$nextTick(function(){t.updateItemDimensions(),t.$refs.wrapper.style["-webkit-overflow-scrolling"]="auto",t.reversed&&(t.$refs.wrapper.scrollTop=t.totalHeight),t.$refs.wrapper.style["-webkit-overflow-scrolling"]="touch",t.updateCurrentPosition(),window.setTimeout(function(){t.ready=!0},100),window.addEventListener("resize",D(function(){t.$refs.track.style.height=0,t.updateItemDimensions()},60))})}}),W=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"container",staticClass:"VirtualStream__Scroller"},[n("div",{ref:"wrapper",staticClass:"VirtualStream__Wrapper",on:{"&scroll":function(e){return t.handleScroll(e)}}},[n("div",{ref:"newItemsList",staticClass:"VirtualStream__Track VirtualStream__Track--newItems"},t._l(t.newItems,function(e,i){return n("Item",{key:e.id,ref:"newItems",refInFor:!0,attrs:{id:e.id,index:i,maxIndex:t.newItems.length}},[t._t("default",null,{item:e,index:i})],2)}),1),t._v(" "),n("div",{ref:"track",staticClass:"VirtualStream__Track"},t._l(t.count,function(e){return n("Item",{key:t.currentView[e-1]?t.currentView[e-1].id:null,ref:"items",refInFor:!0,attrs:{id:t.currentView[e-1]?t.currentView[e-1].id:null,index:e-1,maxIndex:t.currentView.length-1},on:{resizeitem:t.updateItemDimension}},[t.currentView[e-1]?t._t("default",null,{item:t.currentView[e-1],index:e-1}):t._e()],2)}),1)])])};W._withStripped=!0;var q=function(t,e,n,i,s,r,o,a){var d,l=("function"==typeof n?n.options:n)||{};if(l.__file="/Users/dominikbiedebach/www/opensource/vue-virtual-stream/src/components/VirtualStream.vue",l.render||(l.render=t.render,l.staticRenderFns=t.staticRenderFns,l._compiled=!0,s&&(l.functional=!0)),l._scopeId=i,e&&(d=function(t){e.call(this,o(t))}),void 0!==d)if(l.functional){var h=l.render;l.render=function(t,e){return d.call(e),h(t,e)}}else{var u=l.beforeCreate;l.beforeCreate=u?[].concat(u,d):[d]}return l}({render:W,staticRenderFns:[]},function(t){t&&t("data-v-23f5b086_0",{source:"\n.VirtualStream__Scroller[data-v-23f5b086] {\n  height: 100%;\n  left: 0;\n  overflow: auto;\n  position: absolute;\n  top: 0;\n  transform: translate3d(0,0,0);\n  width: 100%;\n}\n.VirtualStream__Wrapper[data-v-23f5b086] {\n  /* -webkit-overflow-scrolling: touch; */\n  height: 100%;\n  overflow: auto;\n  transform: translate3d(0,0,0);\n  width: 100%;\n}\n.VirtualStream__Track[data-v-23f5b086] {\n  position: relative;\n}\n.VirtualStream__Track--newItems[data-v-23f5b086] {\n  left: -99999px;\n  opacity: 0;\n  pointer-events: none;\n  position: absolute;\n  top: 0;\n  transform: translateX(-99999999px);\n  width: 100%;\n}\n.VirtualStream__Items[data-v-23f5b086] {\n  transform: translate3d(0,0,0);\n}\n",map:{version:3,sources:["/Users/dominikbiedebach/www/opensource/vue-virtual-stream/src/components/VirtualStream.vue"],names:[],mappings:";AAuUA;EACA,aAAA;EACA,QAAA;EACA,eAAA;EACA,mBAAA;EACA,OAAA;EACA,8BAAA;EACA,YAAA;CACA;AAEA;EACA,wCAAA;EACA,aAAA;EACA,eAAA;EACA,8BAAA;EACA,YAAA;CACA;AAEA;EACA,mBAAA;CACA;AAEA;EACA,eAAA;EACA,WAAA;EACA,qBAAA;EACA,mBAAA;EACA,OAAA;EACA,mCAAA;EACA,YAAA;CACA;AAEA;EACA,8BAAA;CACA",file:"VirtualStream.vue",sourcesContent:["<template>\n  <div class=\"VirtualStream__Scroller\" ref=\"container\">\n    <div class=\"VirtualStream__Wrapper\" ref=\"wrapper\" @scroll.passive=\"handleScroll\">\n      <div class=\"VirtualStream__Track VirtualStream__Track--newItems\" ref=\"newItemsList\">\n        <Item v-for=\"(item, index) in newItems\" :id=\"item.id\" :index=\"index\" :maxIndex=\"newItems.length\" :key=\"item.id\" ref=\"newItems\">\n          <slot :item=\"item\" :index=\"index\" />\n        </Item>\n      </div>\n      <div class=\"VirtualStream__Track\" ref=\"track\">\n        <Item\n          v-for=\"index in count\"\n          :key=\"(currentView[index - 1]) ? currentView[index - 1].id : null\" ref=\"items\"\n          :id=\"(currentView[index - 1]) ? currentView[index - 1].id : null\"\n          :index=\"index - 1\"\n          :maxIndex=\"currentView.length - 1\"\n          @resizeitem=\"updateItemDimension\"\n        >\n          <slot v-if=\"currentView[index - 1]\" :item=\"currentView[index -1]\" :index=\"index - 1\" />\n        </Item>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n  import throttle from 'lodash/throttle'\n  import debounce from 'lodash/debounce'\n  import getBrowser from '../utils/getBrowser'\n  import Item from './Item.vue'\n\n  const browser = getBrowser()\n  let locked = false\n\n  export default {\n    name: 'VirtualStream',\n    components: {\n      Item\n    },\n    props: {\n      items: {\n        type: Array,\n        required: true,\n      },\n      reversed: {\n        type: Boolean,\n        default: false,\n      },\n      count: {\n        type: Number,\n        default: 40,\n      },\n      offset: {\n        type: Number,\n        default: 5,\n      }\n    },\n    data() {\n      return {\n        position: 0,\n        dimensions: {},\n        totalHeight: 0,\n        ready: false,\n        trigger: {\n          start: false,\n          end: false,\n        },\n        triggerDimensions: false,\n        newItems: [],\n        receivedNewItems: false,\n      }\n    },\n    computed: {\n      itemCount() {\n        return this.items.length\n      },\n      correctedCount() {\n        return Math.round(this.count / 2)\n      },\n      currentView() {\n        const startPos = (this.position - this.correctedCount < 0) ? 0 : this.position - this.correctedCount\n        const endPos = (this.position + this.correctedCount > this.items.length) ? this.items.length : this.position + this.correctedCount\n        return this.items.slice(startPos, endPos)\n      },\n      identifier() {\n        let indexes = []\n        let ids = {}\n        this.items.forEach((item, index) => {\n          indexes[index] = item.id\n          ids[item.id] = index\n        })\n        return { indexes, ids }\n      },\n    },\n    methods: {\n      updateCurrentPosition(force) {\n        const positions = {}\n\n        positions.start = (!this.reversed) ?\n          this.$refs.wrapper.scrollTop :\n          this.totalHeight - (this.$refs.wrapper.scrollTop + this.$refs.wrapper.offsetHeight)\n\n        positions.end = (!this.reversed) ?\n          this.$refs.wrapper.offsetHeight + this.$refs.wrapper.scrollTop :\n          this.totalHeight - this.$refs.wrapper.scrollTop\n        \n        if (positions.end === this.totalHeight) this.$emit('scroll', 'end')\n\n        if (positions.start === 0) {\n          this.$emit('scroll', 'start')\n        } else if (positions.end === this.totalHeight) {\n          this.$emit('scroll', 'end')\n        } else {\n          this.$emit('scroll', positions)\n        }\n\n        if (!this.ready && !force) return false\n\n        if (this.triggerDimensions && this.triggerDimensions.start) {\n          if (this.position > 0 && (positions.start <= this.triggerDimensions.start.end)) {\n            this.updatePosition(this.trigger.start.id)\n          }\n        }\n\n        if (this.triggerDimensions && this.triggerDimensions.end) {\n          if (positions.end >= this.triggerDimensions.end.start) {\n            this.updatePosition(this.trigger.end.id)\n          }\n        }\n\n        if (positions.start < this.triggerDimensions.start.start || positions.end > this.triggerDimensions.end.end) {\n          const dimensions = Object.values(this.dimensions)\n\n          const currentPosition = dimensions.filter(dimension => {\n            const dimensionEnd = dimension.top + dimension.height\n            return ((positions.end >= dimension.top && positions.end <= dimensionEnd))\n          })\n\n          if (currentPosition[0]) {\n            this.updatePosition(currentPosition[0].id)\n          }\n        }\n      },\n      handleScroll: throttle(function() {\n        this.updateCurrentPosition()\n      }, 100),\n      updatePosition(id) {\n        this.position = this.identifier.ids[id]\n      },\n      getPreviousItemHeight(item) {\n        const id = item.id\n\n        const previousIndex = (() => {\n          const index = this.identifier.ids[id] - 1\n          return (index >= 0) ? index : false\n        })()\n\n        const previousId = (() => {\n          const id = (previousIndex !== false) ? this.identifier.indexes[previousIndex] : false\n          return (id) ? id : false\n        })()\n\n        return this.getItemHeight(previousId)\n      },\n      getItemHeight(id) {\n        const dimensionItem = this.dimensions[id] || false\n        return (dimensionItem) ? dimensionItem.top + dimensionItem.height : 0\n      },\n      updateItemDimensions() {\n        this.ready = false\n        const sortedItems = this.$refs.items.filter((item) => {\n          return (item.id !== null)\n        }).sort((a, b) => {\n          if (a.index > b.index) return 1\n          if (a.index < b.index) return -1\n          return 0\n        })\n\n        sortedItems.forEach((item, i) => {\n          const top = this.getPreviousItemHeight(item)\n          this.dimensions[item.id] = { height: item.$el.offsetHeight, width: item.$el.offsetWidth, id: item.id, top }\n        })\n\n        const oldTotalHeight = this.totalHeight\n        const oldScrollTop = this.$refs.wrapper.scrollTop\n\n        this.totalHeight = Object.values(this.dimensions).reduce((dimensionA, dimensionB) => {\n          const aVal = (dimensionA.height) ? dimensionA.height : dimensionA\n          const bVal = (dimensionB.height) ? dimensionB.height : dimensionB\n          return aVal + bVal\n        })\n\n        if (this.receivedNewItems) {\n          if (!this.reversed) {\n            if (oldScrollTop !== 0) {\n              if (oldTotalHeight < this.totalHeight) {\n                const heightDiff = Math.abs(this.totalHeight - oldTotalHeight)\n                window.requestAnimationFrame(() => {\n                  this.$refs.wrapper.style['-webkit-overflow-scrolling'] = 'auto'\n                  this.$refs.wrapper.scrollTop = oldScrollTop + heightDiff\n                  this.$refs.wrapper.style['-webkit-overflow-scrolling'] = 'touch'\n                })\n              }\n            }  \n          }\n        } else {\n          if (oldScrollTop !== 0) {\n            if (this.reversed && oldTotalHeight < this.totalHeight) {\n              const heightDiff = Math.abs(this.totalHeight - oldTotalHeight)\n              window.requestAnimationFrame(() => {\n                this.$refs.wrapper.style['-webkit-overflow-scrolling'] = 'auto'\n                this.$refs.wrapper.scrollTop = oldScrollTop + heightDiff\n                this.$refs.wrapper.style['-webkit-overflow-scrolling'] = 'touch'\n              })\n            }\n          }\n        }\n\n        this.trigger = {\n          start: sortedItems[0],\n          end: sortedItems[sortedItems.length - this.offset]\n        }\n\n        this.triggerDimensions = {\n          full: {\n            start: this.dimensions[this.trigger.start.id],\n            end: this.dimensions[this.trigger.end.id],\n          },\n          start: {\n            start: this.dimensions[this.trigger.start.id].top,\n            end: this.dimensions[this.trigger.start.id].top + this.dimensions[this.trigger.start.id].height\n          },\n          end: {\n            start: this.dimensions[this.trigger.end.id].top,\n            end: this.dimensions[this.trigger.end.id].top + this.dimensions[this.trigger.end.id].height\n          }\n        }\n\n        this.$refs.track.style.height = this.totalHeight + 'px'\n        this.$emit('dimensions', this.dimensions)\n\n        window.setTimeout(() => {\n          this.ready = true\n          this.receivedNewItems = false\n        }, 100)\n      },\n      updateItemDimension(d) {\n        Object.assign(this.dimensions[d.id], d.dimensions)\n      },\n      updateAllDimensions() {\n        const sortedItems = this.$refs.items.filter((item) => {\n          return (item.id !== null)\n        }).sort((a, b) => {\n          if (a.index > b.index) return 1\n          if (a.index < b.index) return -1\n          return 0\n        })\n\n        if (this.$refs.newItems) {\n          this.$refs.newItems.forEach((item, i) => {\n            this.dimensions[item.id] = { height: item.$el.offsetHeight, width: item.$el.offsetWidth, id: item.id, top: 0 }\n          })\n        }\n\n        const newItemHeight = (!this.$refs.newItems) ? false : this.$refs.newItems.reduce((a, b) => {\n          const aVal = (typeof a === 'number') ? a : a.$el.offsetHeight\n          const bVal = (typeof b === 'number') ? b : b.$el.offsetHeight\n          return aVal + bVal\n        }, 0)\n\n        const newDimensions = {}\n\n        Object.keys(this.dimensions).forEach((key, i) => {\n          const dimension = this.dimensions[key]\n          Object.assign(this.dimensions[key], { top: dimension.top + newItemHeight })\n        })\n      }\n    },\n    watch: {\n      currentView(n) {\n        this.$nextTick(() => {\n          this.updateItemDimensions()\n          this.$nextTick(() => {\n            this.updateCurrentPosition()\n          })\n        })\n      },\n      itemCount(newVal, oldVal) {\n        if (newVal !== oldVal) {\n          const diffCount = Math.abs(newVal - oldVal)\n          this.newItems = this.items.slice(0, diffCount)\n          this.receivedNewItems = true\n          this.$emit('newitem')\n        } else {\n          this.newItems = []\n          this.receivedNewItems = false\n        }\n\n        this.updateAllDimensions()\n        \n        this.$nextTick(() => {\n          this.updateCurrentPosition(true)\n        })\n      }\n    },\n    mounted() {\n      this.$nextTick(() => {\n        this.updateItemDimensions()\n        this.$refs.wrapper.style['-webkit-overflow-scrolling'] = 'auto'\n        if (this.reversed) this.$refs.wrapper.scrollTop = this.totalHeight\n        this.$refs.wrapper.style['-webkit-overflow-scrolling'] = 'touch'\n\n        this.updateCurrentPosition()\n\n        window.setTimeout(() => {\n          this.ready = true\n        }, 100)\n\n        window.addEventListener('resize', debounce(() => {\n          this.$refs.track.style.height = 0\n          this.updateItemDimensions()\n        }, 60))\n      })\n    }\n  }\n<\/script>\n\n<style scoped>\n  .VirtualStream__Scroller {\n    height: 100%;\n    left: 0;\n    overflow: auto;\n    position: absolute;\n    top: 0;\n    transform: translate3d(0,0,0);\n    width: 100%;\n  }\n\n  .VirtualStream__Wrapper {\n    /* -webkit-overflow-scrolling: touch; */\n    height: 100%;\n    overflow: auto;\n    transform: translate3d(0,0,0);\n    width: 100%;\n  }\n\n  .VirtualStream__Track {\n    position: relative;\n  }\n\n  .VirtualStream__Track--newItems {\n    left: -99999px;\n    opacity: 0;\n    pointer-events: none;\n    position: absolute;\n    top: 0;\n    transform: translateX(-99999999px);\n    width: 100%;\n  }\n\n  .VirtualStream__Items {\n    transform: translate3d(0,0,0);\n  }\n</style>\n"]},media:void 0})},R,"data-v-23f5b086",!1,0,function t(){var e=document.head||document.getElementsByTagName("head")[0],n=t.styles||(t.styles={}),i="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());return function(t,s){if(!document.querySelector('style[data-vue-ssr-id~="'+t+'"]')){var r=i?s.media||"default":t,o=n[r]||(n[r]={ids:[],parts:[],element:void 0});if(!o.ids.includes(t)){var a=s.source,d=o.ids.length;if(o.ids.push(t),i&&(o.element=o.element||document.querySelector("style[data-group="+r+"]")),!o.element){var l=o.element=document.createElement("style");l.type="text/css",s.media&&l.setAttribute("media",s.media),i&&(l.setAttribute("data-group",r),l.setAttribute("data-next-index","0")),e.appendChild(l)}if(i&&(d=parseInt(o.element.getAttribute("data-next-index")),o.element.setAttribute("data-next-index",d+1)),o.element.styleSheet)o.parts.push(a),o.element.styleSheet.cssText=o.parts.filter(Boolean).join("\n");else{var h=document.createTextNode(a),u=o.element.childNodes;u[d]&&o.element.removeChild(u[d]),u.length?o.element.insertBefore(h,u[d]):o.element.appendChild(h)}}}}});var F={install:function t(e){t.installed||(t.installed=!0,e.component("VirtualStream",q))}},U=null;"undefined"!=typeof window?U=window.Vue:void 0!==t&&(U=t.Vue),U&&U.use(F),e.a=q}).call(e,n("DuR2"))},gyDf:function(t,e){},vSdX:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.8bcb0e5f05b00b69b2f8.js.map